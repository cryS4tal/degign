/surveys:
  get:
    tags:
      - survey
    summary: 获取问卷列表
    description: |
      系统.问卷管理

      当enabled为false或不设置时需要权限, 否则为公开

      edition.extras不返回

    parameters:
      - $ref: '#/parameters/path_q'
      - $ref: '#/parameters/name_like_q'
      - $ref: '#/parameters/enabled_q'
      - $ref: '#/parameters/offset_q'
      - $ref: '#/parameters/limit_q'
    responses:
      "200":
        $ref: '#/responses/surveys'
  post:
    tags:
      - survey
    summary: 添加问卷
    description: 系统.问卷管理
    parameters:
      - $ref: '#/parameters/path_f'
      - $ref: '#/parameters/name_f'
      - $ref: '#/parameters/desc_f'
    responses:
      "200":
        $ref: '#/responses/survey'
/surveys/{id}:
  parameters:
    - $ref: '#/parameters/id'
  get:
    tags:
      - survey
    summary: 获取问卷详情
    description: |
      enabled为false则需要系统权限，否则公开

      设定edition_id获取指定版本的信息
    responses:
      "200":
        $ref: '#/responses/survey'
  patch:
    tags:
      - survey
    summary: 更新问卷(仅更新非空内容）
    description: 系统.问卷管理
    parameters:
      - $ref: '#/parameters/name_f'
      - $ref: '#/parameters/desc_f'
      - $ref: '#/parameters/enabled_f'
    responses:
      "200":
        $ref: '#/responses/opt_success'
  delete:
    tags:
      - survey
    summary: 删除问卷
    description: 系统.问卷管理
    responses:
      "200":
        $ref: '#/responses/opt_success'
/surveys/{id}/editions:
  parameters:
    - $ref: '#/parameters/id'
  get:
    tags:
      - survey
    summary: 获取问卷版本列表
    description: |
      系统.问卷管理
    parameters:
      - $ref: '#/parameters/offset_q'
      - $ref: '#/parameters/limit_q'
    responses:
      200:
        $ref: '#/responses/survey_editions'
  post:
    tags:
      - survey
    summary: 添加问卷版本
    description: |
      系统.问卷管理
    parameters:
      - $ref: '#/parameters/extras_f'
    responses:
      200:
        $ref: '#/responses/survey_edition'
/survey_editions/{id}:
  parameters:
    - $ref: '#/parameters/id'
  patch:
    tags:
      - survey
    summary: 更新问卷版本(仅更新非空内容)
    description: |
      系统.问卷管理

      版本一旦发布禁止变更
    parameters:
      - $ref: '#/parameters/extras_f'
      - $ref: '#/parameters/enabled_f'
    responses:
      200:
        $ref: '#/responses/opt_success'
  delete:
    tags:
      - survey
    summary: 删除问卷版本
    description: |
      系统.问卷管理

      无法删除发布版本
    responses:
      200:
        $ref: '#/responses/opt_success'
  get:
    tags:
      - survey
    summary: 获取版本详情
    description: |
      系统.问卷管理
    responses:
      200:
        $ref: '#/responses/survey_edition_detail'
/surveys/{id}/current_edition:
  parameters:
    - $ref: '#/parameters/id'
  put:
    tags:
      - survey
    summary: 设置当前版本
    description: |
      系统.问卷管理

      设置指定版本为当前版本, 若版本未发布则修改为发布状态
    parameters:
      - $ref: '#/parameters/edition_id_f'
    responses:
      200:
        $ref: '#/responses/opt_success'
